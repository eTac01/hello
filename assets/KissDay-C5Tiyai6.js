import{g as t,l as s,m as i,n as e,A as o,o as n,C as a}from"./index-DI5LSjs4.js";import{B as r}from"./BaseExperience-CpvtY6rA.js";class p extends r{constructor(t,s,i){super(t,s,i),this.particles1=null,this.particles2=null}getInstruction(){return"Draw them closer..."}getCompletionMessage(){return"A kiss is a conversation<br>without words."}async init(){this.createParticleSets(),this.setupInteraction(),await super.init(),this.unsubscribeUpdate=this.sceneManager.onUpdate(this.update.bind(this))}createParticleSets(){const t=(t,a)=>{const r=new s,p=new Float32Array(450);for(let s=0;s<150;s++){const t=.5+.5*Math.random();p[3*s]=a+(Math.random()-.5)*t,p[3*s+1]=(Math.random()-.5)*t,p[3*s+2]=(Math.random()-.5)*t}r.setAttribute("position",new i(p,3));const c=new e({color:t,size:.08,transparent:!0,opacity:.8,blending:o});return new n(r,c)};this.particles1=t(a.champagneGold,-2),this.particles2=t(a.roseRed,2),this.group.add(this.particles1,this.particles2)}setupInteraction(){this.mousePos={x:0,y:0},this.boundMouseMove=t=>{this.mousePos.x=t.clientX/window.innerWidth*2-1,this.mousePos.y=-t.clientY/window.innerHeight*2+1},window.addEventListener("mousemove",this.boundMouseMove)}update(t,s){if(!this.isActive)return;const i=1.5*(1-Math.abs(this.mousePos.x))-2,e=2-1.5*(1-Math.abs(this.mousePos.x));this.particles1.position.x+=.02*(i-this.particles1.position.x),this.particles2.position.x+=.02*(e-this.particles2.position.x);this.particles1.position.distanceTo(this.particles2.position)<1&&!this.isCompleted&&this.onComplete_()}async onComplete_(){const s=this.particles1.position.clone().add(this.particles2.position).multiplyScalar(.5);t.to(this.particles1.position,{x:s.x,duration:1.5}),t.to(this.particles2.position,{x:s.x,duration:1.5,onComplete:()=>this.complete()})}dispose(){this.unsubscribeUpdate&&this.unsubscribeUpdate(),window.removeEventListener("mousemove",this.boundMouseMove),super.dispose()}}export{p as default};
