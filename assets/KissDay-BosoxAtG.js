import{B as u,d,k as l,f as m,g as w}from"./three-CTi2GLhd.js";import{g as p}from"./gsap-C8pce-KX.js";import{B as b}from"./BaseExperience-u8VwpAi8.js";import{C as c}from"./index-BLRnMeqI.js";class y extends b{constructor(t,e,s){super(t,e,s),this.particles1=null,this.particles2=null}getInstruction(){return"Draw them closer..."}getCompletionMessage(){return"A kiss is a conversation<br>without words."}async init(){this.createParticleSets(),this.setupInteraction(),await super.init(),this.unsubscribeUpdate=this.sceneManager.onUpdate(this.update.bind(this))}createParticleSets(){const t=(e,s)=>{const n=new u,o=new Float32Array(150*3);for(let i=0;i<150;i++){const a=.5+Math.random()*.5;o[i*3]=s+(Math.random()-.5)*a,o[i*3+1]=(Math.random()-.5)*a,o[i*3+2]=(Math.random()-.5)*a}n.setAttribute("position",new d(o,3));const h=new l({color:e,size:.08,transparent:!0,opacity:.8,blending:m});return new w(n,h)};this.particles1=t(c.champagneGold,-2),this.particles2=t(c.roseRed,2),this.group.add(this.particles1,this.particles2)}setupInteraction(){this.mousePos={x:0,y:0},this.boundMouseMove=t=>{this.mousePos.x=t.clientX/window.innerWidth*2-1,this.mousePos.y=-(t.clientY/window.innerHeight)*2+1},window.addEventListener("mousemove",this.boundMouseMove)}update(t,e){if(!this.isActive)return;const s=-2+(1-Math.abs(this.mousePos.x))*1.5,r=2-(1-Math.abs(this.mousePos.x))*1.5;this.particles1.position.x+=(s-this.particles1.position.x)*.02,this.particles2.position.x+=(r-this.particles2.position.x)*.02,this.particles1.position.distanceTo(this.particles2.position)<1&&!this.isCompleted&&this.onComplete_()}async onComplete_(){const t=this.particles1.position.clone().add(this.particles2.position).multiplyScalar(.5);p.to(this.particles1.position,{x:t.x,duration:1.5}),p.to(this.particles2.position,{x:t.x,duration:1.5,onComplete:()=>this.complete()})}dispose(){this.unsubscribeUpdate&&this.unsubscribeUpdate(),window.removeEventListener("mousemove",this.boundMouseMove),super.dispose()}}export{y as default};
