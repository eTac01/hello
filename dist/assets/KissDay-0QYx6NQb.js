import{B as l,d as u,k as h,f as d,g as m}from"./three-BDTjZVi7.js";import{g as a}from"./gsap-C8pce-KX.js";import{B as b}from"./BaseExperience--1RX-Q25.js";import{C as c}from"./index-DU_j9lSb.js";class k extends b{constructor(t,i,o){super(t,i,o),this.particles1=null,this.particles2=null}getInstruction(){return"Draw them closer..."}getCompletionMessage(){return"A kiss is a conversation<br>without words."}async init(){this.createParticleSets(),this.setupInteraction(),await super.init(),this.unsubscribeUpdate=this.sceneManager.onUpdate(this.update.bind(this))}createParticleSets(){const t=(i,o)=>{const r=new l,e=new Float32Array(150*3);for(let s=0;s<150;s++){const n=.5+Math.random()*.5;e[s*3]=o+(Math.random()-.5)*n,e[s*3+1]=(Math.random()-.5)*n,e[s*3+2]=(Math.random()-.5)*n}r.setAttribute("position",new u(e,3));const p=new h({color:i,size:.08,transparent:!0,opacity:.8,blending:d});return new m(r,p)};this.particles1=t(c.champagneGold,-2),this.particles2=t(c.roseRed,2),this.group.add(this.particles1,this.particles2)}setupInteraction(){this.onDoubleClick=()=>{!this.isActive||this.isCompleted||this.onComplete_()},window.addEventListener("dblclick",this.onDoubleClick)}update(t,i){this.isActive&&(this.particles1.position.y=Math.sin(i*.5)*.2,this.particles2.position.y=Math.cos(i*.5)*.2)}async onComplete_(){const t=this.particles1.position.clone().add(this.particles2.position).multiplyScalar(.5);a.to(this.particles1.position,{x:t.x,duration:1.5}),a.to(this.particles2.position,{x:t.x,duration:1.5,onComplete:()=>this.complete()})}dispose(){this.unsubscribeUpdate&&this.unsubscribeUpdate(),window.removeEventListener("dblclick",this.onDoubleClick),super.dispose()}}export{k as default};
